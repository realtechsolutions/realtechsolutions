<!DOCTYPE html>
<html>
  <head>
   
    </head>
  <body>
    

  <div id="chart_div" height = "400px" width = "500px"> </div> 



<p id = "p">  Organisation chart   </p>


<table id= "chartdata" style = "display:none"  > 
<tr>
      <td contenteditable="true" id="n1">name1</td>
      <td contenteditable="true" id="d1">desq</td>
      <td contenteditable="true" id="m1">mgr1</td>
    </tr>
    <tr>
      <td contenteditable="true" id="n2">name2</td>
      <td contenteditable="true" id="d2">desq11</td>
      <td contenteditable="true" id="m2">mgr2</td>
    </tr>
    <tr>
      <td contenteditable="true" id="n3">name3</td>
      <td contenteditable="true" id="d3">desq11</td>
      <td contenteditable="true" id="m3">mgr2</td>
    </tr>
    <tr>
      <td contenteditable="true" id="n4">name4</td>
      <td contenteditable="true" id="d4">desq11</td>
      <td contenteditable="true" id="m4">mgr2</td>
    </tr>
    <tr>
      <td contenteditable="true" id="n5">name5</td>
      <td contenteditable="true" id="d5">desq11</td>
      <td contenteditable="true" id="m5">mgr2</td>
    </tr>
    <tr>
      <td contenteditable="true" id="n6">name6</td>
      <td contenteditable="true" id="d6">desq11</td>
      <td contenteditable="true" id="m6">mgr2</td>
    </tr>
    <tr>
      <td contenteditable="true" id="n7">name7</td>
      <td contenteditable="true" id="d7">desq11</td>
      <td contenteditable="true" id="m7">mgr2</td>
    </tr>
    <tr>
      <td contenteditable="true" id="n8">name8</td>
      <td contenteditable="true" id="d8">desq11</td>
      <td contenteditable="true" id="m8">mgr2</td>
    </tr>
    <tr>
      <td contenteditable="true" id="n9">name9</td>
      <td contenteditable="true" id="d9">desq11</td>
      <td contenteditable="true" id="m9">mgr2</td>
    </tr>
    <tr>
      <td contenteditable="true" id="n10">name10</td>
      <td contenteditable="true" id="d10">desq11</td>
      <td contenteditable="true" id="m10">mgr2</td>
    </tr>
    <tr>
      <td contenteditable="true" id="n11">name11</td>
      <td contenteditable="true" id="d11">desq11</td>
      <td contenteditable="true" id="m11">mgr2</td>
    </tr>
    <tr>
    <td contenteditable="true" id="n12">name2</td>
    <td contenteditable="true" id="d12">desc2</td>
    <td contenteditable="true" id="m12">mgr2</td>
  </tr>
  <tr>
    <td contenteditable="true" id="n13">name3</td>
    <td contenteditable="true" id="d13">desc3</td>
    <td contenteditable="true" id="m13">mgr3</td>
  </tr>
  <tr>
    <td contenteditable="true" id="n14">name4</td>
    <td contenteditable="true" id="d14">desc4</td>
    <td contenteditable="true" id="m14">mgr4</td>
  </tr>
  <tr>
    <td contenteditable="true" id="n15">name5</td>
    <td contenteditable="true" id="d15">desc5</td>
    <td contenteditable="true" id="m15">mgr5</td>
  </tr>
  <tr>
    <td contenteditable="true" id="n16">name6</td>
    <td contenteditable="true" id="d16">desc6</td>
    <td contenteditable="true" id="m16">mgr6</td>
  </tr>
  <tr>
    <td contenteditable="true" id="n17">name7</td>
    <td contenteditable="true" id="d17">desc7</td>
    <td contenteditable="true" id="m17">mgr7</td>
  </tr>
  <tr>
    <td contenteditable="true" id="n18">name8</td>
    <td contenteditable="true" id="d18">desc8</td>
    <td contenteditable="true" id="m18">mgr8</td>
  </tr>
  <tr>
    <td contenteditable="true" id="n19">name9</td>
    <td contenteditable="true" id="d19">desc9</td>
    <td contenteditable="true" id="m19">mgr9</td>
  </tr>
  <tr>
    <td contenteditable="true" id="n20">name10</td>
    <td contenteditable="true" id="d20">desc10</td>
    <td contenteditable="true" id="m20">mgr10</td>
  </tr>
 



   
</table>

<button type="button" onclick = "setLocalStorage()" >Save!</button>
 
<button type="button" onclick = "setVisibility ()" >Edit</button>


<script>
var collection = document.querySelectorAll("[contenteditable]");

for (var node of collection) {
console.log(localStorage.getItem(node.id)!= null)
console.log(localStorage.getItem(node.id))
if( localStorage.getItem(node.id)!=null)
{node.innerText = localStorage.getItem(node.id)}

}
 
function setLocalStorage() {
for (var node of collection) {
localStorage.setItem(node.id,node.innerText)
document.getElementById("chartdata").style.display = "none"
console.log("test function")
}
} 

function setVisibility () {document.getElementById("chartdata").style.display = "block"
console.log("fum works")

}

</script>


 <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
    function item (name) { return localStorage.getItem(name)}
    
      google.charts.load('current', {packages:["orgchart"]});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Name');
        data.addColumn('string', 'Manager');
        data.addColumn('string', 'ToolTip');

        // For each orgchart box, provide the name, manager, and tooltip to show.
      // const n1 = localStorage.getItem("n1")
       // const n2 = localStorage.getItem("n2")
       //console.log(item("n1"))
       
        data.addRows([
          [item('n1'), '', 'Chairman'],
        [item("n2"), item("m2"), 'Executive Director and CEO'],
          [item('n3'), item("m3"), ''],
        [item('n4'), item("m4"), ''],
          [item('n5'), item("m5"), ''],
       [item('n6'), item("m6"), ''],
          [item('n7'), item("m7"), ''],
          [item('n8'), item("m8"), ''],
         [item('n9'), item("m9"), ''],
          [item('n9'), item("m9"), ''],
          [item('n10'), item("m10"), ''],
          [item('n11'), item("m11"), ''],
          [item('n12'), item("m12"), ''],
        /*  [item('n13'), item("m13"), ''],
          [item('n14'), item("m14"), ''],
          [item('n15'), item("m15"), ''],
          [item('n16'), item("m16"), ''],
          [item('n17'), item("m17"), ''],
          [item('n18'), item("m18"), ''],
          [item('n19'), item("m19"), ''],
          [item('n20'), item("m20"), ''] */
          
          
        ]);

        // Create the chart.
        var chart = new google.visualization.OrgChart(document.getElementById('chart_div'));
        // Draw the chart, setting the allowHtml option to true for the tooltips.
        chart.draw(data, {'allowHtml':true});
      }
   </script>





  
</body>
</html>

